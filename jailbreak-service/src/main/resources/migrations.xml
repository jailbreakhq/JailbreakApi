<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

    <changeSet id="1" author="kbaker">
    	<createTable tableName="api_tokens">
    		<column name="api_token" type="char(64)">
    			<constraints primaryKey="true" nullable="false"/>
    		</column>
    		<column name="user_id" type="bigint">
    			<constraints nullable="false"/>
    		</column>
    		<column name="expires" type="bigint">
    			<constraints nullable="false"/>
    		</column>
    	</createTable>
    	<createIndex tableName="api_tokens" indexName="user_id">
    		<column name="user_id" type="bigint"/>
    	</createIndex>
    	<createTable tableName="users">
    		<column name="user_id" type="bigint">
    			<constraints primaryKey="true" nullable="false"></constraints>
    		</column>
    		<column name="time_created" type="bigint"></column>
    		<column name="email" type="varchar(120)">
    			<constraints nullable="false"></constraints>
    		</column>
    		<column name="user_level" type="tinyint">
    			<constraints nullable="false"></constraints>
    		</column>
    		<column name="first_name" type="varchar(25)"></column>
    		<column name="last_name" type="varchar(25)"></column>
    		<column name="gender" type="tinyint"></column>
    		<column name="timezone" type="tinyint"></column>
    		<column name="locale" type="char(10)"></column>
    		<column name="facebook_link" type="text"></column>
    	</createTable>
    </changeSet>
    <changeSet id="2" author="bakerke">
    	<createTable tableName="teams">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="team_number" type="int" />
            <column name="team_name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="names" type="varchar(255)"/>
            <column name="university" type="tinyint"/>
            <column name="start_position" type="point" />
        	<column name="current_position" type="point" />
        	<column name="avatar" type="text" />
        	<column name="tag_line" type="text" />
        </createTable>
        <createTable tableName="checkins">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="location" type="varchar(255)"/>
            <column name="status" type="varchar(255)"/>
            <column name="position" type="point"/>
            <column name="time" type="bigint"/>
            <column name="team_id" type="int"/>
        </createTable>
        <createIndex tableName="checkins" indexName="team_id">
    		<column name="team_id" type="bigint"/>
    	</createIndex>
    </changeSet>
    
</databaseChangeLog>